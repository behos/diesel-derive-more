language: rust
rust:
  - stable
  - beta
  - nightly
services:
  - postgresql
before_script:
  - cargo install diesel_cli
  - psql -c 'create database travis_ci_test;' -U postgres
  - pushd tests && ~/.cargo/bin/diesel migration run && popd
env:
  - DATABASE_URL=postgres://postgres@127.0.0.1/travis_ci_test
